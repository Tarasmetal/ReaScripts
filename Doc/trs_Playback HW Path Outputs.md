[⬅️ На главную (Main)](../README.md)

# trs_PlayBack Routing

## Описание
**trs_PlayBack Routing** — это Lua скрипт для REAPER с графическим интерфейсом на базе **ReaImGui**. Скрипт предназначен для автоматической маршрутизации (роутинга) треков в проекте на основе их имен. Это идеальный инструмент для быстрой настройки плейбэка (Playback) или подготовки мультитрека к выводу на физические выходы аудиоинтерфейса.

Скрипт позволяет создать конфигурацию, где определенным именам треков соответствуют конкретные аппаратные выходы (Hardware Outputs). При применении настроек скрипт автоматически отключает\вкл посыл на мастер-канал и назначает прямые выходы.

## Основные возможности

*   **Автоматическая маршрутизация:** Поиск треков в проекте по имени и назначение им соответствующих аппаратных выходов.
*   **Управление типами выходов:** Поддержка как **Стерео**, так и **Моно** выходов.
*   **Изоляция от Мастера:** Автоматически отключает "Master Send" (отправку на мастер-канал) для маршрутизируемых треков.
*   **Управление Мастер-треком:** Опция для глобального включения или отключения (Mute/Unmute) всех аппаратных выходов мастер-трека.
*   **Система пресетов:**
    *   Сохранение и загрузка конфигураций в текстовые файлы.
    *   Автоматическое восстановление последнего использованного пресета при запуске скрипта.
*   **Удобное редактирование:** Добавление и удаление треков из списка конфигурации прямо в интерфейсе.

## Требования

*   **REAPER** (рекомендуется последняя версия)
*   **ReaImGui** (библиотека интерфейса, устанавливается через ReaPack)
*   **SWS Extension** (рекомендуется для корректной работы функций управления треками)

## Инструкция по использованию

### Интерфейс
Окно скрипта разделено на панель управления пресетами и список маршрутизации.

#### 1. Настройка списка треков
В таблице настроек вы можете задать параметры для каждого типа трека:
*   **Имя трека:** Введите точное имя трека, как оно названо в проекте REAPER (например, `PB`, `CLICK`, `BASS`).
*   **Выход:** Укажите номер первого канала аппаратного выхода (Hardware Output).
    *   *Справа от имени отображается итоговый диапазон каналов (например, `1-2` или `3`).*
*   **Тип:** Выберите режим:
    *   **стерео:** Используется пара выходов (например, 1-2).
    *   **моно:** Используется один моно-канал.

**Управление строками:**
*   **Добавить строку:** Нажмите клавишу **`Insert`** на клавиатуре.
*   **Удалить строку:** Кликните на поле ввода имени трека, чтобы оно было в фокусе, и нажмите клавишу **`Delete`**.

#### 2. Опция "Мастер-трек"
Чекбокс **Мастер-трек** управляет состоянием аппаратных выходов самого мастер-трека проекта REAPER:
*   **[ x ] Включен:** Все аппаратные выходы мастер-трека будут **размьютированы** (Unmuted).
*   **[   ] Выключен:** Все аппаратные выходы мастер-трека будут **замьютированы** (Muted).

#### 3. Применение настроек
Нажмите кнопку **"Применить маршрутизацию"**. Скрипт выполнит следующие действия:
1.  Просканирует все треки в проекте.
2.  Если имя трека совпадает с одной из настроек:
    *   Отключит галочку "Master Send".
    *   Удалит все текущие Hardware Sends на этом треке.
    *   Создаст новый Hardware Send согласно настройкам (номер канала и моно/стерео режим).
3.  Применит настройки Mute/Unmute к выходам Мастер-трека.

### Работа с пресетами
*   **Загрузить пресет:** Открывает стандартное диалоговое окно для выбора сохраненного файла настроек.
*   **Сохранить пресет:** Позволяет сохранить текущую конфигурацию под новым именем. Файлы сохраняются в папку `RoutingPresets` рядом со скриптом.

## Автор
**Taras Umanskiy**
*   **VK:** [http://vk.com/tarasmetal](http://vk.com/tarasmetal)
*   **Donation:** [https://vk.com/Tarasmetal](https://vk.com/Tarasmetal)
*   **GitHub:** [https://github.com/Tarasmetal/ReaScripts](https://github.com/Tarasmetal/ReaScripts)

---
Разработано с ❤️ для сообщества REAPER.